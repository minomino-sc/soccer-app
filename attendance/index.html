<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>出席率PDF</title>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body{
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:#f5f7fb;
  margin:0;
  padding:0;
}

/* ========= PDF 全体 ========= */
#pdfWrapper{
  background:#fff;
  color:#000;
}

/* ========= 表紙 ========= */
#pdfCover{
  padding-top:120px;
  padding-bottom:120px;
  text-align:center;
  page-break-after: always;
}

#pdfCover h1{
  font-size:22px;
  margin-bottom:12px;
}

#pdfCover h2{
  font-size:16px;
  margin-bottom:20px;
}

#pdfCover .meta{
  font-size:13px;
  line-height:1.8;
}

/* ========= 出席率エリア ========= */
#statsPdfArea{
  padding:24px;
  page-break-before: always;
}

.statsGrid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:12px;
}

/* ========= 出席カード ========= */
.statCard{
  background:linear-gradient(135deg,#6b1b3b,#2a0f1e);
  color:#fff;
  border-radius:10px;
  padding:12px;
  font-size:12px;
  page-break-inside: avoid;
}

.statCard .name{
  font-weight:700;
  margin-bottom:6px;
}

.statCard .row{
  line-height:1.5;
}

/* ========= ボタン（既存想定） ========= */
button{
  background:#6b1b3b;
  color:#fff;
  border:none;
  padding:10px 16px;
  border-radius:6px;
  font-size:14px;
}
</style>
</head>

<body>

<button onclick="exportPdf()">PDF出力</button>

<div id="pdfWrapper">

  <!-- 表紙 -->
  <div id="pdfCover">
    <h1>⚽ 箕谷サッカークラブ</h1>
    <h2>2026年1月 出席率まとめ</h2>
    <div class="meta">
      対象人数：<span id="totalCount">23</span> 名<br>
      練習回数：<span id="practiceCount">5</span> 回<br>
      試合回数：<span id="matchCount">3</span> 回<br><br>
      作成日：2026/01/14
    </div>
  </div>

  <!-- 出席率 -->
  <div id="statsPdfArea">
    <div class="statsGrid" id="statsGrid">
      <!-- JSでカード生成 -->
    </div>
  </div>

</div>

<script>
/* ========= ダミーデータ（既存ロジック想定） ========= */
const members = [
  {name:"松岡 凛太", p:3, pt:3, g:1, gt:1},
  {name:"入江 遥", p:2, pt:2, g:0, gt:2},
  {name:"山本 悠人", p:1, pt:2, g:2, gt:2},
  {name:"平尾 桜聖", p:3, pt:3, g:1, gt:1},
];

/* ========= 描画 ========= */
const grid = document.getElementById("statsGrid");

members.forEach(m=>{
  const total = m.p + m.g;
  const totalMax = m.pt + m.gt;
  const rate = Math.round(total / totalMax * 100);

  const div = document.createElement("div");
  div.className = "statCard";
  div.innerHTML = `
    <div class="name">${m.name}</div>
    <div class="row">練習：${m.p}/${m.pt} (${Math.round(m.p/m.pt*100)}%)</div>
    <div class="row">試合：${m.g}/${m.gt} (${Math.round(m.g/m.gt*100)}%)</div>
    <div class="row">合計：${total}/${totalMax} (${rate}%)</div>
  `;
  grid.appendChild(div);
});

/* ========= PDF出力 ========= */
function exportPdf(){
  html2pdf().set({
    margin:10,
    filename:'attendance.pdf',
    html2canvas:{scale:2},
    jsPDF:{unit:'mm',format:'a4',orientation:'portrait'}
  }).from(document.getElementById("pdfWrapper")).save();
}
</script>

</body>
</html>
