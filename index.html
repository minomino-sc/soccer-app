<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="format-detection" content="telephone=no">

<title>ç®•è°·SC å‹•ç”»å…±æœ‰ã‚·ã‚¹ãƒ†ãƒ </title>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
<link rel="manifest" href="manifest.json" />
<link rel="stylesheet" href="styles.css" />
</head>
<body>

<main class="container">
  <header class="header card">
    <h1 id="title">âš½ï¸ç®•è°·SC å‹•ç”»å…±æœ‰ã‚·ã‚¹ãƒ†ãƒ âš½ï¸</h1>
  </header>

  <!-- â–¼ ãƒãƒ¼ãƒ å‚åŠ  / ãƒ­ã‚°ã‚¤ãƒ³ -->
  <section class="section-card" id="teamSection">

    <div class="team-title-row">
      <h2 class="page-title">ãƒãƒ¼ãƒ å‚åŠ  / ãƒ­ã‚°ã‚¤ãƒ³</h2>
      <img src="minotani-logo.png" class="team-logo" alt="minotani logo">
    </div>
<div class="row" style="position:relative;">
  <input id="teamNameInput" placeholder="ãƒãƒ¼ãƒ åï¼ˆä¾‹ï¼šç®•è°·SCï¼‰" />
  <div id="teamSuggestions" class="suggestions"></div>
</div>
<div class="row" style="position:relative;">
  <input id="inviteCodeInput" placeholder="æ‹›å¾…ã‚³ãƒ¼ãƒ‰" />
  <div id="inviteSuggestions" class="suggestions"></div>
</div>
 
    <div class="row">
      <button id="btnJoin" class="btn primary">å‚åŠ  / ä½œæˆ</button>
    </div>
    <p class="muted small">æ‹›å¾…ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒ å…±æœ‰ã§ãã¾ã™ã€‚å®Œå…¨ç„¡æ–™ã® YouTube é™å®šå…¬é–‹æ–¹å¼ã§ã™ã€‚</p>
  </section>

  <!-- â–¼ YouTubeå‹•ç”»è¿½åŠ  -->
  <section class="section-card" id="addVideoSection" style="display:none;">
    <h2>YouTubeå‹•ç”»è¿½åŠ </h2>
    <div class="row">
      <input id="youtubeUrl" placeholder="YouTube ã®å…±æœ‰URLï¼ˆä¾‹ https://youtu.be/xxxxxï¼‰" />
      <button id="btnAddYouTube" class="btn primary">è¿½åŠ </button>
    </div>
    <p class="muted small">å‹•ç”»ã¯ YouTube ã«é™å®šå…¬é–‹ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å…±æœ‰ã—ã¦ãã ã•ã„ã€‚</p>
  </section>

  <!-- â–¼ è©¦åˆä½œæˆ -->
  <section class="section-card" id="createMatchSection" style="display:none;">
    <h2>è©¦åˆçµæœä½œæˆ</h2>

    <div class="row vertical">
      <label class="lbl">è©¦åˆç¨®åˆ¥</label>
      <select id="matchTypeCreate">
        <option value="">ç¨®åˆ¥ã‚’é¸æŠ</option>
        <option value="å…¬å¼æˆ¦">å…¬å¼æˆ¦</option>
        <option value="ã‚«ãƒƒãƒ—æˆ¦">ã‚«ãƒƒãƒ—æˆ¦</option>
        <option value="äº¤æµæˆ¦">äº¤æµæˆ¦</option>
      </select>
    </div>

    <div class="row vertical date-wrapper">
      <label class="lbl" for="matchDate">è©¦åˆæ—¥</label>
      <div class="date-input-wrapper">
        <input id="matchDate" type="date" required />
        <span class="placeholder-text">æ—¥ä»˜ã‚’é¸æŠ</span>
      </div>
    </div>

    <div class="row vertical">
      <label class="lbl">å¯¾æˆ¦ç›¸æ‰‹</label>
      <input id="opponent" placeholder="ä¾‹ï¼šâ—‹â—‹SC" />
    </div>

    <div class="row vertical">
      <label class="lbl">ä¼šå ´</label>
      <input id="place" placeholder="ä¾‹ï¼šã—ã‚ã‚ã›ã®æ‘ã€€çƒæŠ€å ´" />
    </div>

    <div class="row vertical">
      <label class="lbl">å¾—ç‚¹</label>
      <div class="row">
        <input id="scoreA" type="number" min="0" placeholder="è‡ªãƒãƒ¼ãƒ å¾—ç‚¹" />
        <input id="scoreB" type="number" min="0" placeholder="ç›¸æ‰‹ãƒãƒ¼ãƒ å¾—ç‚¹" />
      </div>
    </div>

    <div class="row vertical">
      <label class="lbl">PKï¼ˆä»»æ„ï¼‰</label>
      <div class="row">
        <input id="pkA" type="number" min="0" placeholder="è‡ªãƒãƒ¼ãƒ PKå¾—ç‚¹" />
        <input id="pkB" type="number" min="0" placeholder="ç›¸æ‰‹PKå¾—ç‚¹" />
      </div>
      <p class="muted small">åŒç‚¹ã§PKæ±ºç€æ™‚ã®ã¿å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    </div>

    <div class="row vertical">
      <label class="lbl">ç´ã¥ã‘å‹•ç”»</label>
      <select id="videoYear"></select>
<select id="videoMonth" disabled></select>
<select id="videoSelect" disabled></select>
      <button id="btnCreateMatch" class="btn" style="margin-top:6px;">ä½œæˆ</button>
    </div>
    <p class="muted small">ä½œæˆå¾Œã«è©¦åˆçµæœä¸€è¦§ã§ç·¨é›†ã§ãã¾ã™ã€‚</p>
  </section>

<section class="section-card" id="backupSection" style="display:none; margin-top:12px;">
  <h2>Firestore ä¸€æ‹¬ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— / å¾©å…ƒ</h2>

  <!-- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ -->
  <button id="btnBackupAllFirestore" class="btn primary">Firestore ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</button>
  <p class="muted small">ç®¡ç†è€…å°‚ç”¨ã€‚ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ JSON å½¢å¼ã§å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>
 <p class="muted small" id="backupTimestamp"></p> 

  <!-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ -->
  <input type="file" id="uploadBackupFile" style="display:none" accept=".json">
  <button id="btnRestoreBackup" class="btn danger">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— JSON ã‚’ Firestore ã«å¾©å…ƒ</button>
  <p class="muted small">ç®¡ç†è€…å°‚ç”¨ã€‚JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã™ã‚‹ã¨ Firestore ã«ä¸€æ‹¬å¾©å…ƒã—ã¾ã™ã€‚</p>
</section>
  
  <!-- â–¼ è©¦åˆçµæœä¸€è¦§ -->
  <section class="section-card" id="scoresSection" style="display:none;">
    <h2>è©¦åˆçµæœä¸€è¦§</h2>
    <div id="scoreGroups"></div>
  </section>

  <!-- â–¼ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«æˆ»ã‚‹ -->
  <div style="margin-top:18px; text-align:center;">
    <button id="btnBackLogin" class="btn" style="background:#888; width:90%;">ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«æˆ»ã‚‹</button>
  </div>

  <!-- â˜… ã“ã“ã«è¿½åŠ  â˜… -->
  <div class="team-photo-area">
    <img src="23C16624-4546-4C6A-8CB6-B870008E1645.png" alt="ç®•è°·SC ãƒãƒ¼ãƒ å†™çœŸ">
  </div>

  <footer class="card small muted">
    Â© ç®•è°·SC å‹•ç”»å…±æœ‰ã‚·ã‚¹ãƒ†ãƒ  â€” YouTubeé™å®šå…¬é–‹æ–¹å¼ï¼ˆå®Œå…¨ç„¡æ–™ï¼‰
  </footer>
</main>

<!-- â–¼ ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="editModal" class="modal hidden">
  <div class="modal-content section-card">
    <h2>è©¦åˆç·¨é›†</h2>

    <div class="row vertical">
      <label class="lbl">è©¦åˆç¨®åˆ¥</label>
      <select id="matchType">
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        <option value="å…¬å¼æˆ¦">å…¬å¼æˆ¦</option>
        <option value="ã‚«ãƒƒãƒ—æˆ¦">ã‚«ãƒƒãƒ—æˆ¦</option>
        <option value="äº¤æµæˆ¦">äº¤æµæˆ¦</option>
      </select>
    </div>

    <div class="row vertical">
      <label class="lbl">è©¦åˆæ—¥</label>
      <input type="date" id="edit-date">
    </div>

    <div class="row vertical">
      <label class="lbl">å¯¾æˆ¦ç›¸æ‰‹</label>
      <input type="text" id="edit-opponent">
    </div>

    <div class="row vertical">
      <label class="lbl">ä¼šå ´</label>
      <input type="text" id="edit-place">
    </div>

    <div class="row vertical">
      <label class="lbl">è‡ªãƒãƒ¼ãƒ å¾—ç‚¹</label>
      <input type="number" id="edit-my-score">
    </div>

    <div class="row vertical">
      <label class="lbl">ç›¸æ‰‹ãƒãƒ¼ãƒ å¾—ç‚¹</label>
      <input type="number" id="edit-opponent-score">
    </div>

    <div class="row vertical">
      <label class="lbl">PKï¼ˆä»»æ„ï¼‰</label>
      <div class="row">
        <input id="edit-pkA" type="number" placeholder="è‡ªPK" />
        <input id="edit-pkB" type="number" placeholder="ç›¸æ‰‹PK" />
      </div>
    </div>

    <div class="row vertical">
      <label class="lbl">ç´ã¥ã‘å‹•ç”»</label>
<select id="editVideoYear"></select>
<select id="editVideoMonth" disabled></select>
<select id="edit-video-select" disabled></select>     
    </div>

<div class="row vertical">
  <label class="lbl">ã‚´ãƒ¼ãƒ«ç™»éŒ²</label>

  <!-- ç§’æ•°å…¥åŠ› -->
  <div class="row">
    <input id="goalTime" type="number" placeholder="ç§’æ•°ï¼ˆä¾‹ï¼š85ï¼‰" />
  </div>

  <!-- ãƒœã‚¿ãƒ³ -->
  <div class="row">
    <button id="btnAddMyGoal" class="btn">âš½ å¾—ç‚¹</button>
    <button id="btnAddOpponentGoal" class="btn danger">ğŸ”´ å¤±ç‚¹</button>
  </div>

  <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º -->
  <div id="goalTimelineList" class="muted small" style="margin-top:8px;"></div>
</div>

    <div class="row" style="margin-top:12px;">
      <button id="saveEdit" class="save-btn" style="flex:1;">ä¿å­˜</button>
    </div>
    <div class="row" style="margin-top:8px;">
      <button id="deleteMatch" class="delete-btn" style="flex:1;">ã“ã®è©¦åˆã‚’å‰Šé™¤</button>
    </div>
    <div class="row" style="margin-top:8px;">
      <button id="modalClose" class="close-btn" style="flex:1;">é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>
<!-- â–² ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->

<!-- â–¼ æœˆåˆ¥æˆç¸¾ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="monthlyModal" class="modal hidden">
  <div class="modal-content section-card">
    <h2 id="monthlyTitle">ğŸ“Š æœˆåˆ¥æˆç¸¾</h2>

    <div id="monthlyContent"></div>

    <div class="row" style="margin-top:12px;">
      <button id="monthlyClose" class="close-btn">é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>
<!-- â–² æœˆåˆ¥æˆç¸¾ãƒ¢ãƒ¼ãƒ€ãƒ« -->

<div id="creatorLabel">â­ï¸è£½ä½œè€…ï¼šY.Ninomiya</div>

<!-- â–¼ Firebase åˆæœŸåŒ– & main.js -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, addDoc, setDoc, doc, getDocs, getDoc, updateDoc, deleteDoc, query, where } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDMJfAd5BffteapT51ZUO06VP-XDReFSwY",
  authDomain: "minotani-sc-app.firebaseapp.com",
  projectId: "minotani-sc-app",
  storageBucket: "minotani-sc-app.firebasestorage.app",
  messagingSenderId: "757066295000",
  appId: "1:757066295000:web:1c7a90f968af75d26099ad"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window._firebaseDB = db;
window._firebaseFns = { collection, addDoc, setDoc, doc, getDocs, getDoc, updateDoc, deleteDoc, query, where };

// Firebase åˆæœŸåŒ–å¾Œã« main.js ã‚’ module ã¨ã—ã¦èª­ã¿è¾¼ã‚€
import './main.js';
</script>

</body>
</html>
